{% extends 'base.html.twig' %}

{% block title %}Modification du match - KickScore{% endblock %}

{% block body %}
    <div class="bg-gradient-to-br from-slate-50 to-white min-h-screen">
        <div class="max-w-3xl mx-auto px-4 py-6 sm:px-6 lg:px-8">
            {# Header Section #}
            <div class="mb-6 md:mb-8">
                <h1 class="text-xl sm:text-2xl md:text-3xl font-bold text-slate-800 text-center md:text-left">
                    Modification du match
                    <span class="block mt-1 text-sm sm:text-base md:text-lg text-slate-600 font-normal">
                        Modifiez les informations du match
                    </span>
                </h1>
            </div>

            {# Form Section #}
            <div class="bg-white rounded-lg shadow-sm border border-slate-200">
                <form action="{{ path('update_match', {'id': match.id}) }}" method="POST" class="p-4 sm:p-6 space-y-6">
                    <input type="hidden" name="_csrf_token" value="{{ csrf_token('update' ~ match.id) }}">

                    {# Match Date #}
                    <div class="space-y-2">
                        <label for="date" class="block text-sm font-medium text-slate-700">Date du match</label>
                        <input type="datetime-local"
                               id="date"
                               name="date"
                               value="{{ match.date|date('Y-m-d\\TH:i') }}"
                               class="mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"
                               required>
                    </div>

                    {# Teams Section #}
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        {# Green Team #}
                        <div class="space-y-2">
                            <label for="greenteam" class="block text-sm font-medium text-slate-700">Équipe verte</label>
                            <select id="greenteam"
                                    name="greenteam"
                                    class="mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"
                                    required>
                                {% for team in teams %}
                                    <option value="{{ team.id }}" {% if team.id == match.greenteam.id %}selected{% endif %}>
                                        {{ team.name }}
                                    </option>
                                {% endfor %}
                            </select>
                        </div>

                        {# Blue Team #}
                        <div class="space-y-2">
                            <label for="blueteam" class="block text-sm font-medium text-slate-700">Équipe bleue</label>
                            <select id="blueteam"
                                    name="blueteam"
                                    class="mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"
                                    required>
                                {% for team in teams %}
                                    <option value="{{ team.id }}" {% if team.id == match.blueteam.id %}selected{% endif %}>
                                        {{ team.name }}
                                    </option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>

                    {# Scores Section #}
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        {# Green Score #}
                        <div class="space-y-2">
                            <label for="greenscore" class="block text-sm font-medium text-slate-700">Score équipe verte</label>
                            <input type="number"
                                   id="greenscore"
                                   name="greenscore"
                                   value="{{ match.greenscore }}"
                                   min="0"
                                   class="mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"
                                   required>
                        </div>

                        {# Blue Score #}
                        <div class="space-y-2">
                            <label for="bluescore" class="block text-sm font-medium text-slate-700">Score équipe bleue</label>
                            <input type="number"
                                   id="bluescore"
                                   name="bluescore"
                                   value="{{ match.bluescore }}"
                                   min="0"
                                   class="mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"
                                   required>
                        </div>
                    </div>

                    {# Championship #}
                    <div class="space-y-2">
                        <label for="championship" class="block text-sm font-medium text-slate-700">Championnat</label>
                        <select id="championship"
                                name="championship"
                                class="mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"
                                required>
                            {% for championship in championships %}
                                <option value="{{ championship.id }}" {% if championship.id == match.championship.id %}selected{% endif %}>
                                    {{ championship.name }}
                                </option>
                            {% endfor %}
                        </select>
                    </div>

                    {# Buttons Section #}
                    <div class="flex flex-col xs:flex-row justify-end gap-3 pt-4 border-t border-slate-200">
                        <a href="{{ path('app_matches') }}"
                           class="px-4 py-2 text-sm font-medium text-slate-700 bg-white border border-slate-300 rounded-lg hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 text-center">
                            Annuler
                        </a>
                        <button type="submit"
                                class="px-4 py-2 text-sm font-medium text-white bg-blue-900 border border-transparent rounded-lg hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                            Enregistrer les modifications
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
{% endblock %}